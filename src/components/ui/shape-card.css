.shape-card{
  width:280px;height:360px;border-radius:16px;
  background: radial-gradient(120% 100% at 50% 0%, hsl(var(--card)) 0%, hsl(var(--background)) 60%, hsl(var(--background)) 100%);
  box-shadow: 0 10px 40px hsl(var(--foreground) / 0.15);
  transform-style: preserve-3d;
  perspective: 900px;
  position:relative; overflow:hidden;
  border:1px solid hsl(var(--border));
}

.stage{ position:absolute; inset:20% 8% 22% 8%; transform-style:preserve-3d; }

.layer{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; }

.shadow{ transform: translateZ(-60px); }
.shadow-ellip{
  width:80%; height:20%; border-radius:50%;
  background: radial-gradient(ellipse at 50% 50%, hsl(var(--foreground)/.28) 0%, transparent 70%);
  filter: blur(10px);
}

.z2{ transform: translateZ(0); }
.z3{ transform: translateZ(20px); opacity:.92; }
.z4{ transform: translateZ(40px); opacity:.92; }
.z5{ transform: translateZ(60px); opacity:.92; }

/* הילה/בוהק */
.add-glow{ filter: drop-shadow(0 0 16px color-mix(in srgb, var(--halo) 70%, transparent)); }
.shape-card:hover .add-glow{
  filter:
    drop-shadow(0 0 26px color-mix(in srgb, var(--halo) 80%, transparent))
    drop-shadow(0 0 42px color-mix(in srgb, var(--halo) 40%, transparent));
}
.add-bloom{ mix-blend-mode: screen; filter: saturate(115%) brightness(1.02); }

/* טקסטים */
.card-title{
  position:absolute; left:12px; bottom:12px; padding:8px 14px; border-radius:10px;
  background:hsl(var(--card)); color:hsl(var(--card-foreground));
  font:600 13px/1.2 Inter, system-ui;
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--halo) 35%, transparent);
}
.card-description{
  position:absolute; left:12px; bottom:46px; padding:4px 10px; border-radius:6px;
  background:hsl(var(--muted)/.8); color:hsl(var(--muted-foreground));
  font-size:11px; line-height:1.2; opacity:0; transform:translateY(4px);
  transition: opacity .16s ease, transform .16s ease;
}
.shape-card:hover .card-description{ opacity:1; transform:translateY(0); }

/* Selected */
.shape-card.selected{
  border:2px solid var(--halo);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--halo) 35%, transparent), 0 30px 80px color-mix(in srgb, var(--halo) 35%, transparent);
  transform: scale(1.02);
}
.selected-badge{
  position:absolute; top:12px; right:12px; padding:4px 10px; border-radius:8px;
  background: var(--halo); color:#0B0F1A; font:600 11px/1 Inter, system-ui;
}

/* הנפשות עדינות בלבד */
.shape-card,.layer{ will-change: transform; }
@media (prefers-reduced-motion: reduce){
  .shape-card,.layer{ transition:none !important; animation:none !important; }
}
